---
import { getConfig, getDefaultLanguage } from "@galactiks/config";
import { type Content, getWebPageFooter } from "@galactiks/explorer";
import LanguageSelector from "./LanguageSelector.astro";

const {
  webManifest: { name },
} = getConfig();

type Props = { content: Content };
const { content } = Astro.props;

const footerElement = await getWebPageFooter({
  inLanguage: content.inLanguage || getDefaultLanguage(),
});
---

<footer class="mt-8 py-6">
  {
    typeof footerElement === "object" &&
      Array.isArray(footerElement.itemListElement) &&
      footerElement.itemListElement.length > 0 && (
        <ul role="presentation" class="py-4 text-center text-sm text-gray-600">
          {footerElement.itemListElement.map(({ path, url, name }, i) => (
            <li key={`footer-navigation-${i}`} class="inline-block">
              <a
                href={path || url}
                class="flex lg:px-3 py-2 hover:text-primary"
              >
                {name}
              </a>
            </li>
          ))}
        </ul>
      )
  }

  {
    Array.isArray(content.headers?.alternates) && content.headers?.alternates?.length > 2 && (
      <div class="flex justify-center">
        <LanguageSelector
          currentLang={content.inLanguage}
          languages={content.headers?.alternates}
        />
      </div>
    )
  }

  <p class="pt-2 text-center text-sm text-slate-500">
    {name}
  </p>
</footer>
